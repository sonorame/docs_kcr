# Требования к системе

## Требования к системе в целом

### Производительность

**`NFPER1`** Система должна обеспечивать обработку заявлений не менее чем 1000 заявлений в день с возможностью масштабирования до 5000 заявлений в день в периоды повышенной активности.

**`NFPER2`** Время обработки заявления от момента подачи до вывода на рассмотрение не должно превышать 5 минут.  

### Безопасность

**`NFSEC1`** Все данные, передаваемые между системой и ЕПГУ, должны быть защищены с использованием шифрования.  

**`NFSEC2`** Доступ к обращениям и ЦАР должен быть разграничен на основе ролей сотрудников и должен быть защищен от несанкционированного доступа.  

### Масштабируемость

**`NFEXT1`** Система должна быть способна масштабироваться для обработки увеличенного количества заявлений без значительного снижения производительности.

### Надежность

**`NFROB1`** Система должна иметь резервное копирование данных и механизмы восстановления после сбоев для обеспечения непрерывной работы.  

**`NFROB2`** Время недоступности системы не должно превышать 1 часа в месяц.

### Совместимость

**`NFCOM1`** Система должна быть совместима с семейством ОС Windows и части дистрибутивов Linux, которые входят в список отечественного ПО (попадают под импортозамещение). 

### Доступность

**`NFAVL1`** Система должна быть доступна 98% времени между 5:00 и полуночью по местному времени и 90% времени между полуночью и 5:00 по местному времени, за исключением времени планового обслуживания.

**`NFAVL2`** Допустимое время простоя в сутки не более 30 минут.

### Особенности хранения данных

**`NFDT1`** Данные заявлений должны храниться в соответствии с требованиями законодательства о защите персональных данных.  

### Концептуальная целостность

**`NFARC1`** Система должна соответствовать архитектурному стилю REST.

**`NFARC2`** Система должна обеспечивать целостность данных в процессе обработки заявлений на основании ЦАР.

### Поддерживаемость

**`NFSUP1`** Необходимо логировать действия пользователей в системе. Просмотр данных логов должен осуществляться через графический интерфейс. 

**`NFSUP2`** Система должна обеспечивать мониторинг работы и журналирование событий для обеспечения удобства поддержки и обнаружения проблем.

## Требования к функциям (задачам), выполняемым системой

### UseCase диаграмма

Основные функции системы представлены в виде UseCase диаграммы.  

![](diagrams/out/usecase.svg)

### Описание UseCase, реализуемых в рамках MVP

#### Загрузка ЦАР через СМЭВ

| Название                                            | UC-1: Загрузка ЦАР через СМЭВ                                                                                                                                                                                                                                               |
|-----------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Краткое описание                                    | Создать новую карточу ЦАР в системе для получения возможности выполнять обращения                                                                                                                               															|
| Субъекты                                            | 1. Пользователь<br/>2. Система                                                                                                                                                                                  															|
| Предусловие                                         | Пользователь зашел в реестр услуг                                                                                                                                                                               															|
| Основной сценарий                                   | 1. Пользователь нажимает на кнопку N1. <br/>2. Система выводит окно, в котором необходимо ввести номер ЦАР. <br/>3. Пользователь вводит номер ЦАР и нажимает кнопку отправить - N2. <br/>4. Система сообщает пользователю, что сообщение поставлено в очередь на обработку. |
| Наименования элементов пользовательского интерфейса | N1: “Запросить регламент” <br/>N2: “Отправить”                                                                                                                                                                                                                              |
| Диаграмма                                           | ![](diagrams/out/get_car.svg){ width="100" }  	                                                                                                                                                                                  											|

#### Загрузка ЦАР вручную

| Название                                            | UC-2: Загрузка ЦАР вручную                                                                                                                                                                                                                                                                                                                              |
|-----------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Краткое описание                                    | Создать новую карточу ЦАР в системе для получения возможности выполнять обращения                                                                                                                                                                                                                                                                       |
| Субъекты                                            | 1. Пользователь<br/>2. Система                                                                                                                                                                                                                                                                                                                          |
| Предусловие                                         | Пользователь зашел в реестр услуг                                                                                                                                                                                                                                                                                                                       |
| Основной сценарий                                   | 1. Пользователь нажимает на кнопку N1.<br/>2. Открывается проводник ОС.<br/>3. Клиент выбирает ЦАР в формате xml.<br/>4. Клиент нажимает кнопку N2.<br/>    1. Если выбран xml файл, котоорый не содержит информации о ЦАР - AF-1<br/>5. Загрузка завершена. Система сообщает пользователю, что ЦАР успешно загружен в систему. Конец сценария.         |
| Альтернативный сценарий                             | AF1: Выбран некорректный xml файл. <br/>1. Система выводит пользователю информационное сообщение о том, что выбран некорректный файл и кнопку N3.<br/>    2. Пользователь нажимает N3. Конец сценария. 																																					|
| Наименования элементов пользовательского интерфейса | N1: "Загрузить xml ЦАР"<br/>N2: "Открыть."<br/>N3: "Ок"                                                                                                                                                                                                                                                                                                 |
| Диаграмма                                           | ![](diagrams/out/upload_car.svg){ width="100" }                                                                                                                                                                                                                                                                                                         |

#### Просмотр информации о ЦАР

| Название                                            | UC-3: Просмотр информации о ЦАР                                                                                  |
| --------------------------------------------------- | -----------------------------------------------------------------------------------------------------------------|
| Краткое описание                                    | Просмотреть информацию об услуге                                                                                 |
| Субъекты                                            | 1\. Пользователь<br>2\. Система                                                                                  |
| Предусловие                                         | Пользователь зашел в реестр услуг                                                                                |
| Основной сценарий                                   | 1\. Пользователь нажимает на вкладку N1<br>2\. Система открывает вкладку с основной информацией. Конец сценария  |
| Наименования элементов пользовательского интерфейса | N1: "Услуга"                                                                                                     |

#### Просмотр информации о подуслугах

| Название                                            | UC-4: Просмотр информации о подуслугах                                                                                      |
| --------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------- |
| Краткое описание                                    | Просмотр информации о подуслугах (документы, этапы, структура)                                                              |
| Субъекты                                            | 1\. Пользователь<br>2\. Система                                                                                             |
| Предусловие                                         | Пользователь зашел в реестр услуг                                                                                           |
| Основной сценарий                                   | 1\. Пользователь нажимает на вкладку N1<br>2\. Система отображет информацию об подуслуге. Конец сценария                    |
| Наименования элементов пользовательского интерфейса | N1: "Подуслуга"                                                                                                             |

#### Ручное создание обращений

| Название                                            | UC-5: Ручное создание обращений                                                                                                                                                                                                                                                                                                                                                                                                   |
| --------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Краткое описание                                    | Ручное создание обращений для оказания услуги                                                                                                                                                                                                                                                                                                                                                                                     |
| Субъекты                                            | 1\. Пользователь<br>2\. Система                                                                                                                                                                                                                                                                                                                                                                                                   |
| Предусловие                                         | Пользователь зашел в реестр обращений                                                                                                                                                                                                                                                                                                                                                                                             |
| Основной сценарий                                   | 1\. Пользователь нажимает кнопку N1.<br>2\. Система открывает окно создания обращений.<br>3\. Пользователь выбирает услугу.<br>4\. На основании выбранной информации, система рисует выпадающий список с подуслугой.<br>5\. Пользователь выбирает подуслугу<br>6\. На основании выбранной подуслуги система рисует поля для профилирования.<br>7\. Пользователь заполняет все поля и нажимает кнопку N2.<br>8\. Система сохраняет введеную информацию в БД. Конец сценария.                                                        |
| Наименования элементов пользовательского интерфейса | N1: "+"<br>N2: "Сохранить"                                                                                                                                                                                                                                                                                                                                                                                                        |
| Диаграмма                                           | ![](diagrams/out/create_task.jpg){ width="100" }             																																																																																									  |

#### Автоматическое создание обращений

| Название                                            | UC-6: Автоматическое создание обращений                                                                                                                                                                                                                                                                                                                                                                                                          |
| --------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Краткое описание                                    | Создание обращений для оказания услуги                                                                                                                                                                                                                                                                                                                                                                                            |
| Субъекты                                            | Система                                                                                                                                                                                                                                                                                                                                                                                                   |
| Предусловие                                         | Микросмэв получил информацию о заявлении из СМЭВ                                                                                                                                                                                                                                                                                                                                                                                             |
| Основной сценарий                                   | 1\. Микросмэв кидает вебхук в монолит.<br>2\. Монолит запрашивает список услуг и подуслуг у сервиса услуг.<br>3\. Сервис услуг отдает информацию.<br>4\. Монолит обрабатывает информацию. Конец сценария.|
| Диаграмма                                           | ![](diagrams/out/auto_create_task.jpg){ width="100" }             																																																																																									  |


#### Обработка обращений

| Название                                            | UC-7: Обработка обращений                                                                                                                                                                                                                                                                                                                          |
|-----------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Краткое описание                                    | Обработка обращений с целью оказания услуги заявителю                                                                                                                                                                                                                                                                                              |
| Субъекты                                            | 1. Пользователь<br/>2. Система                                                                                                                                                                                                                                                                                                                     |
| Предусловие                                         | 1. Пользователь зашел в реестр обращений<br/>2. Создано обращение в рамках UC-5 или UC-6                                                                                                                                                                                                                                                            |
| Основной сценарий                                   | 0. Пользователь нажимает на вкладку N0.<br/>1. Пользователь нажимает кнопку N1, выполнение сценария UC-11.<br/>2. Система добавляет новую вкладку N2, выполнение сценария UC-9.<br/>3. Пользователь переходит на вкладку N2.<br/>4. Пользователь нажимает кнопку N3.<br/>5. Система добавляет вкладку N6, пользователь нажимает на вкладку N6. Выполнение сценария UC-10. Конец сценария.   |
| Наименования элементов пользовательского интерфейса | N0: "Прием заявления" <br/>N1: "Зарегистрировать" <br/>N2: "Межведомственное взаимодействие" <br/>N3: "Принять решение" <br/>N5: "Сохранить"<br/>N6: "Предоставление результата"                                                                                                                                                                                                                 |

#### Автоматическое изменение статуса на основании ЦАР  

| Название                                            | UC-8: Автоматическое изменение статуса на основании ЦАР                                                                                                                                                                                                                                                                                                                                                   |
|-----------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Краткое описание                                    | Создание межведомственных запросов для проведения документарной проверки                                                                                                                                                                                                                                                                                                                    |
| Субъекты                                            | Система                                                                                                                                                                                                                                                                                                                                                              |
| Предусловие                                         | Выполялись сценарии UC-9, UC-10 или UC-11                                                                                                                                                                                                                                                                                                                                                       |
| Основной сценарий                                   | 1. Монолит получает список событий у сервиса услуг.<br/>2. Сервис услуг возвращает события, монолит обрабатывает события.<br/>3. Монолит отправляет запрос в микросмэв для смены статусов.<br/>4. Микросмэв возвращает 200.<br/>5. Монолит меняет статус записи в БД. Конец сценария.                         |
| Диаграмма                                           | ![](diagrams/out/auto_change_status.jpg){ width="100" }                                             	                                                                                                                                                       	                                                                                                                                |

#### Создание межведомственных запросов  

| Название                                            | UC-9: Создание межведомственных запросов                                                                                                                                                                                                                                                                                                                                                   |
|-----------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Краткое описание                                    | Создание межведомственных запросов для проведения документарной проверки                                                                                                                                                                                                                                                                                                                    |
| Субъекты                                            | 1. Пользователь<br/>2. Система                                                                                                                                                                                                                                                                                                                                                              |
| Предусловие                                         | Пользователь зашел в реестр обращений                                                                                                                                                                                                                                                                                                                                                       |
| Основной сценарий                                   | 1. Пользователь на вкладке N1 нажимает кнопку N2.<br/>2. Система меняет статус обращения и отрисовывает вкладку N3.<br/>3. Пользователь переходит на вкладку N3 и нажимает кнопку N4.<br/> 1. Если в системе есть ВС и настроено автоматическая отправка запросов - AF-1<br/>4. Запрос отправлен. В UI отображается статус "Запрос обрабатывается". Конец сценария.                         |
| Альтернативный сценарий                             | AF1: Запросы направлены автоматически. <br/>1. Система автоматически создает и отправлять межведомственные запросы.<br/>2. Переход к п.4 основного сценария. Конец сценария.                                                                                                                                                                                                                |
| Наименования элементов пользовательского интерфейса | N1: "Прием заявлений"<br/>N2: "Зарегистрировать"<br/>N3: "Межведомственное взаимодействие"<br/>N4: "Запрос"                                                                                                                                                                                                                                                                                 |
| Диаграмма                                           | ![](diagrams/out/create_requests.svg){ width="100" }                                             	                                                                                                                                                       	                                                                                                                                |

#### Принятие решения  

| Название                                            | UC-10: Принятие решения                                                                                                                                                                                                                                                                                                                                                   |
|-----------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Краткое описание                                    | Создание межведомственных запросов для проведения документарной проверки                                                                                                                                                                                                                                                                                                                    |
| Субъекты                                            | 1. Пользователь<br/>2. Система                                                                                                                                                                                                                                                                                                                                                              |
| Предусловие                                         | Пользователь зашел в реестр обращений                                                                                                                                                                                                                                                                                                                                                       |
| Основной сценарий                                   | 1. Пользователь на вкладке N1 нажимает кнопку N2.<br/>2. Система меняет статус обращения и отрисовывает вкладку N3.<br/>3. Пользователь переходит на вкладку N3 и нажимает кнопку N4.<br/> 1. Если в системе есть ВС и настроено автоматическая отправка запросов - AF-1<br/>4. Запрос отправлен. В UI отображается статус "Запрос обрабатывается". Конец сценария.                         |
| Альтернативный сценарий                             | AF1: Запросы направлены автоматически. <br/>1. Система автоматически создает и отправлять межведомственные запросы.<br/>2. Переход к п.4 основного сценария. Конец сценария.                                                                                                                                                                                                                |
| Наименования элементов пользовательского интерфейса | N1: "Прием заявлений"<br/>N2: "Зарегистрировать"<br/>N3: "Межведомственное взаимодействие"<br/>N4: "Запрос"                                                                                                                                                                                                                                                                                 |
| Диаграмма                                           | ![](diagrams/out/create_requests.svg){ width="100" }                                             	                                                                                                                                                       	                                                                                                                                |

#### Регистрация заявления  

| Название                                            | UC-11: Регистрация заявления                                                                                                                                                                                                                                                                                                                                                   |
|-----------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Краткое описание                                    | Создание межведомственных запросов для проведения документарной проверки                                                                                                                                                                                                                                                                                                                    |
| Субъекты                                            | 1. Пользователь<br/>2. Система                                                                                                                                                                                                                                                                                                                                                              |
| Предусловие                                         | Пользователь зашел в реестр обращений                                                                                                                                                                                                                                                                                                                                                       |
| Основной сценарий                                   | 1. Пользователь на вкладке N1 нажимает кнопку N2.<br/>2. Система меняет статус обращения и отрисовывает вкладку N3.<br/>3. Пользователь переходит на вкладку N3 и нажимает кнопку N4.<br/> 1. Если в системе есть ВС и настроено автоматическая отправка запросов - AF-1<br/>4. Запрос отправлен. В UI отображается статус "Запрос обрабатывается". Конец сценария.                         |
| Альтернативный сценарий                             | AF1: Запросы направлены автоматически. <br/>1. Система автоматически создает и отправлять межведомственные запросы.<br/>2. Переход к п.4 основного сценария. Конец сценария.                                                                                                                                                                                                                |
| Наименования элементов пользовательского интерфейса | N1: "Прием заявлений"<br/>N2: "Зарегистрировать"<br/>N3: "Межведомственное взаимодействие"<br/>N4: "Запрос"                                                                                                                                                                                                                                                                                 |
| Диаграмма                                           | ![](diagrams/out/create_requests.svg){ width="100" }                                             	                                                                                                                                                       	                                                                                                                                |

#### Настройка прав пользователей

| Название                                            | UC-12: Настройка прав пользователей                                                                                                                                                                                                                                                                                                                                  |
| --------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Краткое описание                                    | Настройка прав пользователей в справочнике услуг и реестре обращений                                                                                                                                                                                                                                                                                                                    |
| Субъекты                                            | 1\. Администратор<br>2\. Система                                                                                                                                                                                                                                                                                                                                                     |
| Предусловие                                         | Создана учетная запись администратора<br>Создана учетная запись пользователя                                                                                                                                                                                                                                                                                                         |
| Основной сценарий                                   | 1\. Администратор открыл меню с настройкой прав доступа пользователей.<br>2\. Администратор выбирает пользователя, для которого хочет выполнить настройку прав.<br>3\. Система отрисовывает в правой части меню Типы операций и Типы элементов реестра.<br>4\. Администратор настраивает CRUD и сохраняет права для пользователя.<br>5\. Система применяет настройки. Конец сценария.|
| Типы регулируемых прав                              | 1\. CRUD.<br>2\. Тип оперции - "Загрузка ЦАР".<br>3\. Тип операции - "Запрос ЦАР".                                                                                                                                                                                                                                                                                                   |

#### Создание резолюции

| Название                                            | UC-13: Создание резолюции                                                                                                                                                                                                                                                                                                                                  |
| --------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Краткое описание                                    | Настройка прав пользователей в справочнике услуг и реестре обращений                                                                                                                                                                                                                                                                                                                    |
| Субъекты                                            | 1\. Администратор<br>2\. Система                                                                                                                                                                                                                                                                                                                                                     |
| Предусловие                                         | Создана учетная запись администратора<br>Создана учетная запись пользователя                                                                                                                                                                                                                                                                                                         |
| Основной сценарий                                   | 1\. Администратор открыл меню с настройкой прав доступа пользователей.<br>2\. Администратор выбирает пользователя, для которого хочет выполнить настройку прав.<br>3\. Система отрисовывает в правой части меню Типы операций и Типы элементов реестра.<br>4\. Администратор настраивает CRUD и сохраняет права для пользователя.<br>5\. Система применяет настройки. Конец сценария.|
| Типы регулируемых прав                              | 1\. CRUD.<br>2\. Тип оперции - "Загрузка ЦАР".<br>3\. Тип операции - "Запрос ЦАР".                                                                                                                                                                                                                                                                                                   |